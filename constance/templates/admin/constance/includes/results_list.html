{% load admin_static admin_list i18n %}
<table>
    <thead>
        <tr>
            <th><div class="text">{% trans "Name" %}</div></th>
            <th><div class="text">{% trans "Default" %}</div></th>
            <th><div class="text">{% trans "Value" %}</div></th>
            <th><div class="text">{% trans "Is modified" %}</div></th>
        </tr>
    </thead>
    {% for item in config_values %}
    <tr class="{% cycle 'row1' 'row2' %}">
        <th>
            {{ item.name }} <div class="help">{{ item.help_text|linebreaksbr }}</div>
        </th>
        <td>
            {{ item.default|linebreaks }}
        </td>
        <td>
            {{ item.form_field.errors }}
            {{ item.form_field }}
            <br>
            <a href="#" onClick="
              {% if item.is_datetime %}
                var defaultDate = new Date(
                  {{ item.raw_default|date:"Y" }},
                  {{ item.raw_default|date:"n" }} - 1,
                  {{ item.raw_default|date:"j" }},
                  {{ item.raw_default|time:"H" }},
                  {{ item.raw_default|time:"i" }},
                  {{ item.raw_default|time:"s" }});
                var body = document.getElementsByTagName('body')[0];
                var serverOffset = body.getAttribute('data-admin-utc-offset');
                if (serverOffset) {
                  var defaultOffset = defaultDate.getTimezoneOffset() * -60;
                  defaultDate.setTime(defaultDate.getTime() + 1000 * (serverOffset - defaultOffset));
                }                              
                document.getElementById('{{ item.form_field.auto_id }}_0').value =
                  defaultDate.strftime(get_format('DATE_INPUT_FORMATS')[0]);
                document.getElementById('{{ item.form_field.auto_id }}_1').value =
                  defaultDate.strftime(get_format('TIME_INPUT_FORMATS')[0]);
              {% else %}
                document.getElementById('{{ item.form_field.auto_id }}').{% if item.is_checkbox %}checked =
                    {% if item.raw_default %} true {% else %} false {% endif %}
                  {% else %}value = '{{ item.default|escapejs }}'{% endif %}
              {% endif %}; return false;">Reset to default</a>
        </td>
        <td>
            {% if item.modified %}
                <img src="{% static 'admin/img/icon-yes.'|add:icon_type %}" alt="{{ item.modified }}" />
            {% else %}
                <img src="{% static 'admin/img/icon-no.'|add:icon_type %}" alt="{{ item.modified }}" />
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
